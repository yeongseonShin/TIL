# 제1장 웹과 네트워크의 기본에 대해 알아보자.

## 1.1 웹은 HTTP로 나타낸다
웹 브라우저는 웹 브라우저 주소 입력란에 지정된 URL에 의지하여 웹 서버로부터 리소스라고 불리는 파일 등의 정보를 얻는다. 이때 서버에 의뢰하는 웹 브라우저를 클라이언트(Client)라고 한다.
- HTTP(HyperText Transfer Protocol) : 클라이언트에서 서버까지 일련의 흐름을 결정하는 것

## 1.2 HTTP는 이렇게 태어났고 성장했다

### 웹은 지식 공유를 위해 고안
CERN(유럽 입자 물리학 연구소)의 팀 버너스 리 박사가 고안. 최초로 고안한 것은 여러 문서를 상호간에 관련 짓는 하이퍼텍스트(HyperText)에 의해 상호간에 참조할 수 있는 WWW(World Wide Web)의 기본 개념

#### WWW 구성하는 기술 
- 문서 기술 언어 : SGML을 베이스로한 HTML(HyperText Markup Language)
- 문서 전송 프로토콜 : HTTP(HyperText Transfer Protocol) 
- 문서 주소 지정 방법 : URL(Uniform Resource Locator)

### 웹이 성장한 시대
1990년 11월 CERN에서 세계 최초의 웹 서버와 웹 브라우저 개발 / 1993년 대한민국 최초의 홈페이지 개발 

## 1.3 네트워크의 기본은 TCP/IP
인터넷을 포함하여 일반적으로 사용하고 있는 네트워크는 TCP/IP라는 프로토콜에서 움직임. HTTP도 그 중 하나.

### TCP/IP는 프로토콜의 집합
컴퓨터와 네트워크 기기가 상호간에 통신하기 위해서는 서로 같은 방법으로 통신해야한다. 통신하기 위해서는 규칙이 필요하다.
- ex) 어떻게 상대를 찾고, 어떻게 상대에게 이야기를 시작하고, 어떤 언어로 이야기를 하며, 어떻게 이야기를 종료할지 등
서로 다른 하드웨어와 운영체제 등을 가지고 서로 통신을 하기 위해서는 모든 요소에 규칙이 필요 > 이런 규칙을 '프로토콜'이라고 한다. 
- ex) 케이블 규격, IP 주소 지정 방법, 떨어진 상대를 찾기 위한 방법, 도달하는 순서, 웹을 표시하기 위한 순서

- TCP/IP : 인터넷과 관련되 프로토콜들을 모은 것, IP 프로토콜을 사용한 통신에서 사용되고 있는 프로토콜을 총칭

### 계층으로 관리하는 TCP/IP
- TCP/IP에서 중요한 개념 : 계층(Layer)
- 4계층 : 애플리케이션 계층, 트랜스포트 계층, 네트워크 계층, 링크 계층 
계층화가 되어 있기때문에 어디선가 사양이 변경되었을 때 전체를 바꾸지 않고 해당 계층만 변경하면 된다. 각 계층은 계층이 연결되어 있는 부분만 결정되어 있어 각 계층의 내부는 자유롭게 설계 가능하다.

#### TCP/IP 계층
- 애플리케이션 계층 : 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임 결정
- 트랜스포트 계층 : 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름 제공/ TCP(Transmission Control Protocol), UDP(User Data Protocol)
- 네트워크 계층(인터넷 계층) : 네트워크 상에서 패킷의 이동을 다룸. 어떠한 경로(절차)를 거쳐 상대의 컴퓨터까지 패킷을 보낼지 결정. (패킷 : 전송하는 데이터의 최소 단위)
- 링크 계층(데이터 계층, 네트워크 인터페이스 계층) : 네트워크에 접속하는 하드웨어적인 면을 다룸. 운영체제가 하드웨어를 제어하기 때문에 디바이스 드라이버랑 네트워크 인터페이스 카드를 포함.

### TCP/IP 통신의 흐름
- TCP/IP로 통신시 계층 순서대로 거쳐 상대와 통신
#### 송신하는 측 : 애플리케이션 계층에서부터 내려가고 / 수신하는 측 : 애플리케이션 계층에서부터 올라감
#### ex) HTTP 
  [송신측]
  1. 송신측 클라이언트의 애플리케이션 계층(HTTP)에서 어느 웹 페이지를 보고 싶다라는 HTTP 리퀘스트를 지시
  2. 트랜스포트 계층(TCP)에서 애플리케이션 계층에서 받은 데이터(HTTP 메시지)를 통신하기 쉽게 조각내어 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달
  3. 네트워크 계층(IP)에서는 수신지 MAC 주소를 추가해서 링크 계층에 전달 - 네트워크를 통해 송신한 준비 완료
  
  [수신측]
  1. 링크 계층에서 데이터를 받아들여 순서대로 위의 계층에 전달하여 애플리케이션 계층까지 도달
  2. 애플리케이션 계층에 도달하면 클라이언트가 발신했던 HTTP 리퀘스트 내용 수신 가능

송신측에서 각 계층을 거칠 때는 반드시 '헤더'로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가하고, 수신측에서는 각 계층을 거칠 때마다 반드시 해당 계층마다 사용한 헤더를 삭제.
이와 같이 정보를 감싸는 것을 캡슐화라고 함

## 1.4 HTTP와 관계가 깊은 프로토콜은 IP/TCP/DNS
### IP(Internet Protocol) : 배송을 담당, 네트워크 층에 해당
인터넷을 활용하는 거의 대부분의 시스템이 IP를 이용하며, 개개의 패킷을 상태방에게 전달하는 역할을 한다. 상대방에게 전달하기까지 여러 가지 요소가 필요한데, 그 중 가장 중요한 것은 IP주소와 MAC(Media Access Control Address)주소
- IP 주소는 각 노드에 부여된 주소
- MAC 주소는 각 네트워크 카드에 할당된 고유의 주소
- IP 주소는 MAC 주소와 결부된다.
- IP 주소는 변경 가능하지만 기본적으로 MAC 주소는 변경 할 수 없다.

[통신은 ARP를 이용하여 MAC주소에서 한다.]
- IP 통신은 MAC 주소에 의존해서 통신. 인터넷에서 통신시 여러 대의 컴퓨터와 네트워크 기기를 중계해서 상대방에서 도착하는데 중계하는 동안 다음으로 중계할 곳의 MAC주소를 사용하여 목적지를 찾아감. 
이때 ARP(Address Resolution Protocol)사용. ARP는 주소를 해결하기 위한 프로토콜 중 하나 - 수신지의 IP 주소를 바탕으로 MAC 주소를 조사할 수 있음.

- 그 누구도 인터넷 전체를 파악하고 있지는 않다.
목적지까지 중계를 하는 도중에 컴퓨터와 라우터 등의 네트워크 기기는 목적지에 도착하기까지 대략적인 목적지만 알고 있다 > 이를 '라우팅'

### 신뢰성을 담당하는 TCP (Transfer Control Protocol) : 트랜스포트 층에 해당, 신뢰성 있는 바이트 스트림 서비스를 제공
- 바이트 스트림 서비스 : 용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리하는 것
- 신뢰성 있는 서비스 : 상대방에게 보내는 서비스
- TCP는 대용량 데이터를 보내기 쉽게 작게 분해하여 상대에게 보내고 정확하게 도착했는지 확인하는 역할을 담당

[상대에게 데이터를 확실하게 보내는 것이 일이다.]
- 상대에게 확실하게 데이터를 보내기 위해 쓰리웨이 핸드셰이킹(Three way handshaking) 사용 : 패킷을 보내고 나서 바로 끝내는 것이 아니라, 보내졌는지 여부를 상태에게 확인.
이때 'SYN'과 'ACK'라는 TCP플래그 사용
- 송신측에서는 최초 'SYN'플래그로 상대에게 접속함과 동시에 패킷을 보내고, 수신측에서는 'SYN/ACK'플래그로 송신측에 접속함과 동시에 패킷을 수신한 사실을 전하고 마지막으로 송신측이 'ACK'플래그를 보내 패킷 교환이 완료되었음을 전함
- 이 과정에서 어디선가 통신이 도중에 끊어지면 TCP는 그와 동시에 같은 수순으로 패킷을 재전송

## 1.5 이름 해결을 담당하는 DNS
- DNS(Domain Name System) : HTTP와 같이 응용 계층 시스템에서 도메인 이름과 IP 주소 이름 확인을 제공
- 컴퓨터는 IP주소와는 별도로 호스트 이름과 도메인 이름을 붙일 수 있음.
- IP주소를 인간은 영어나 숫자로 쓰는 것을 선호 / 컴퓨터는 숫자를 선호 > 이때문에 DNS가 필요
- DNS는 도메인명에서 IP주소를 조사하거나 반대로 IP주소로부터 도메인명을 조사하는 서비스 제공

## 1.6 각각과 HTTP와의 관계
- 그림이라 생략

## 1.7 URL와 URL
- URL : 웹 브라우저 등으로 웹 페이지를 표시하기 위해 입력하는 주소

### URI는 리소스 식별자
- URI(Uniform Resource Identifiers) 
- Uniform : 통일(Uniformity)된 서식을 결정, 여러 가지 종류의 리소스 지정 방법을 같은 맥락에서 구별없이 취급할 수 있게 하고 새로운 스키마(http:와 ftp 등) 도입을 용이
- Resource : '식별 가능한 모든 것', 도큐먼트 파일뿐만 아니라 이미지와 서비스 등 다른 것과 구별할 수 있는 것은 모두 리소스. 단일 부분만 아니라 복수의 집합도 리소스
- Identifiers : 식별 가능한 것을 참조하는 오브젝트이며 식별자, URI는 스키마를 나타내는 리소스를 식별하기 위한 식별자. (스키마 : 리소스를 얻기 위한 수단에 이름을 붙이는 방법)

- URI는 리소스를 식별하기 위해 문자열 전반을 나타내는데 비해, URL은 리소스의 장소(네트워크 상의 위치)를 나타냄
- URL은 URI의 서브셋

### URL 포맷
- URI는 필요한 전체 정보를 지정하는 완전 수식 절대 URI 혹은 완전 수식 절대 URL
- 브라우저 중의 기준 URI에서 상대적 위치를 '/image/log.gif' 와 같이 지정하는 상대 URL

### ex) http://user:pass@www.example.jp:80/dir/index.htm?uid=1#ch1
1. http://와 https:// : 스키마, 리소스를 얻기 위해 사용하는 프로토콜을 지시. 대소문자 무시
2. user:pass : 자격정보(크리덴셜)
3. www.example.jp : 서버주소
4. :80 : 서버포트
5. /dir/index.htm? : 계층적 파일 패스
6. uid=1# : 쿼리 문자열
7. ch1 : 프래그먼트 식별자


[자격정보(크리덴셜)]
- 서버로부터 리소스를 취득하려면 자격정보(크리덴셜) 필요.
- 유저명과 패스워드를 지정(옵션임)

[서버주소]
- 완전 수식 형식인 URL에서는 서버 주소를 지정할 필요가 있음.
- 주소 www.hackr.jp와 같은 DNS 이름이나 "192.168.1.1"과 같은 IPv4 주소나 "0:0:0:0:0:0:0:1"과 같은 IPv6 주소를 대괄호로 묶어서 지정

[서버포트]
- 서버의 접속 상이 되는 네트워크 포트 번호 지정(옵션). 생략하면 디폴트 포트 사용

[계층적 파일 패스]
- 특정 소스를 식별하기 위해서 서버 상의 파일 패스를 지정. UNIX 디렉토리 지정 방법과 비슷

[쿼리 문자열]
- 파일 패스로 지정된 리소스에 임의의 파라미터를 넘겨주지 위해 쿼리 문자열 사용(옵션)

[프래그멘트 식별자]
- 취득한 소스 서브 리소스(도큐먼트 중간에 위치)를 가리키기 위해서 프래그멘트 식별자 사용(옵션)


